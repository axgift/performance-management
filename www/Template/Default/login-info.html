<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登陆人员信息 - 团队工作计划与总结系统</title>
    <link rel="stylesheet" href="styles.css?1.01">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/layui/2.9.7/css/layui.css">
    <script src="https://cdn.staticfile.org/layui/2.9.7/layui.min.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo-container">
                <img src="images/logo.svg" alt="团队工作计划与总结系统" class="system-logo">
            </div>
            <nav>
                <ul>
                    <li><a href="login.html" class="login-link">登录</a></li>
                    <li><a href="dashboard.html">仪表盘</a></li>
                    <li><a href="weekly-plan.html">周计划</a></li>
                    <li><a href="weekly-summary.html">周总结</a></li>
                    <li><a href="performance.html">绩效评分</a></li>
                    <li><a href="profile.html">个人资料</a></li>
                    <li><a href="system-config.html">系统配置</a></li>
                    <li><a href="employee-management.html">员工管理</a></li>
                    <li><a href="login-info.html" class="active">登陆人员信息</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <section id="login-info" class="content-section active">
            <div class="section-header">
                <h2>登陆人员信息</h2>
                <div class="search-container">
                    <div class="layui-input-inline">
                        <input type="text" name="username" placeholder="请输入用户名" class="layui-input">
                    </div>
                    <div class="layui-input-inline">
                        <input type="date" name="loginDate" class="layui-input">
                    </div>
                    <button class="layui-btn" id="search-login">查询</button>
                    <button class="layui-btn layui-btn-primary" id="export-login">导出数据</button>
                </div>
            </div>

            <div class="table-container">
                <table class="layui-hide" id="login-table" lay-filter="login-table"></table>
            </div>
        </section>
    </main>

    <script src="script.js"></script>
    <script>
        layui.use(['table', 'form', 'layer'], function() {
            const table = layui.table;
            const form = layui.form;
            const layer = layui.layer;

            // 渲染登录信息表格
            table.render({
                elem: '#login-table',
                height: 'full-200',
                url: '', // 实际应用中会配置后端接口
                page: true,
                cols: [[
                    {field: 'id', title: 'ID', width: 80, fixed: 'left'},
                    {field: 'username', title: '用户名', width: 120},
                    {field: 'loginTime', title: '登录时间', width: 200},
                    {field: 'ipAddress', title: 'IP地址', width: 160},
                    {field: 'device', title: '设备信息', minWidth: 200},
                    {field: 'location', title: '登录地点', width: 150},
                    {field: 'status', title: '状态', width: 100, templet: function(d) {
                        return d.status === 'success' ? '<span class="layui-badge layui-bg-green">成功</span>' : '<span class="layui-badge layui-bg-red">失败</span>';
                    }},
                    {title: '操作', width: 120, fixed: 'right', align:'center', toolbar: '#login-toolbar'}
                ]],
                // 模拟数据
                data: [
                    {id: 1, username: 'zhangsan', loginTime: '2023-11-10 08:30:22', ipAddress: '192.168.1.101', device: 'Windows 10 / Chrome 117.0', location: '北京', status: 'success'},
                    {id: 2, username: 'lisi', loginTime: '2023-11-10 09:15:47', ipAddress: '192.168.1.102', device: 'macOS Monterey / Safari 16.1', location: '上海', status: 'success'},
                    {id: 3, username: 'wangwu', loginTime: '2023-11-10 10:05:13', ipAddress: '192.168.1.103', device: 'iOS 16.5 / Safari Mobile', location: '广州', status: 'success'},
                    {id: 4, username: 'zhaoliu', loginTime: '2023-11-10 11:20:36', ipAddress: '192.168.1.104', device: 'Android 13 / Chrome Mobile', location: '深圳', status: 'success'},
                    {id: 5, username: 'zhangsan', loginTime: '2023-11-09 18:45:22', ipAddress: '192.168.1.101', device: 'Windows 10 / Edge 117.0', location: '北京', status: 'success'},
                    {id: 6, username: 'unknown', loginTime: '2023-11-09 22:10:05', ipAddress: '103.2xx.xx.xx', device: 'Linux / Firefox 118.0', location: '未知', status: 'fail'}
                ]
            });

            // 工具栏模板
            const toolbarTpl = `
                <div class="layui-btn-container">
                    <a class="layui-btn layui-btn-xs" lay-event="detail">详情</a>
                </div>
            `;
            $('body').append(`<script type="text/html" id="login-toolbar">${toolbarTpl}</script>`);

            // 查询按钮点击事件
            $('#search-login').on('click', function() {
                // 在实际应用中，这里会执行查询逻辑
                layer.msg('查询功能已触发', {icon: 0});
            });

            // 导出按钮点击事件
            $('#export-login').on('click', function() {
                // 在实际应用中，这里会执行导出逻辑
                layer.msg('数据导出中...', {icon: 0});
                setTimeout(() => {
                    layer.msg('数据导出成功', {icon: 1});
                }, 1000);
            });

            // 监听表格工具事件
            table.on('tool(login-table)', function(obj) {
                const data = obj.data;
                if (obj.event === 'detail') {
                    layer.open({
                        type: 1,
                        title: '登录详情',
                        area: ['500px', '350px'],
                        content: `
                            <div style="padding: 20px;">
                                <table class="layui-table">
                                    <tr><td width="30%">用户名</td><td>${data.username}</td></tr>
                                    <tr><td>登录时间</td><td>${data.loginTime}</td></tr>
                                    <tr><td>IP地址</td><td>${data.ipAddress}</td></tr>
                                    <tr><td>设备信息</td><td>${data.device}</td></tr>
                                    <tr><td>登录地点</td><td>${data.location}</td></tr>
                                    <tr><td>登录状态</td><td>${data.status === 'success' ? '<span class="layui-badge layui-bg-green">成功</span>' : '<span class="layui-badge layui-bg-red">失败</span>'}</td></tr>
                                </table>
                            </div>
                        `
                    });
                }
            });
        });
    </script>
</body>
</html>